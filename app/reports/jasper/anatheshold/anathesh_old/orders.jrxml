<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.16.0.final using JasperReports Library version 6.16.0-48579d909b7943b64690c65c71e07e0b80981928  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="orders" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="86f6838b-3768-4336-b07a-ef8032ed8fcf">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="internova_db"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="210"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="783"/>
	<parameter name="order_loading_id" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String"/>
	<queryString language="SQL">
		<![CDATA[select * from 
				(
				select 
				'Φόρτωση' as point_type,
				'φόρτωσης' as point_type2,
				os.id,
				os.order_id,
				os.position,
				os.factory_id,
				os.appointment_day,
				os.appointment_day_load,
				os.truck_loading_code,
				os.comments,
				ord.truck_temprature,
				ord.gross_weight,
				f.address,
				f.appointment_required,
				f.postal_code,
				f.brand_name  as 'factory_name',
				concat(f.lattitude,',',f.longtitude) coordinates,
				cs.brand_name  as 'customer_name'
				from 
				order_schedules os
				left join factories f on (f.id=os.factory_id)
				join orders ord on (ord.id=os.order_id)
				join customers_suppliers cs on (cs.id=ord.customer_id)
				
				union
				
				select 
				IF(ow.offer_schedule_between_waypoint_id is null, 'Εκφόρτωση','Φόρτωση/Εκφόρτωση') as point_type,
				IF(ow.offer_schedule_between_waypoint_id is null, 'εκφόρτωσης','φόρτωση/εκφόρτωσης') as point_type2,
				ow.id,
				ow.order_id,
				ow.position,
				ow.factory_id,
				ow.appointment_day,
				ow.appointment_day_load,
				ow.truck_loading_code,
				ow.comments,
				ord.truck_temprature,
				ord.gross_weight,
				f.address,
				f.appointment_required,                
				f.postal_code,
				f.brand_name 'factory_name',
				concat(f.lattitude,',',f.longtitude) coordinates,
				cs.brand_name as 'customer_name'
				from 
				order_waypoints ow
				left join factories f on (f.id=ow.factory_id)
				join orders ord on (ord.id=ow.order_id)
				join customers_suppliers cs on (cs.id=ord.customer_id)
				) as timeline_table
				where timeline_table.order_id in 
				(
				select id
				from orders
				where id in
				(
				select order_id 
				from orders_loading_orders_selections 
				where order_loading_id=$P{order_loading_id}
				)
				)
				
				order by   timeline_table.position]]>
	</queryString>
	<field name="point_type" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="point_type"/>
		<property name="com.jaspersoft.studio.field.label" value="point_type"/>
	</field>
	<field name="point_type2" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="point_type2"/>
		<property name="com.jaspersoft.studio.field.label" value="point_type2"/>
	</field>
	<field name="id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="id"/>
		<property name="com.jaspersoft.studio.field.label" value="id"/>
	</field>
	<field name="order_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="order_id"/>
		<property name="com.jaspersoft.studio.field.label" value="order_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="order_schedules"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="position" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="position"/>
		<property name="com.jaspersoft.studio.field.label" value="position"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="order_waypoints"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="factory_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="factory_id"/>
		<property name="com.jaspersoft.studio.field.label" value="factory_id"/>
	</field>
	<field name="appointment_day" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="appointment_day"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_day"/>
	</field>
	<field name="appointment_day_load" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="appointment_day_load"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_day_load"/>
	</field>
	<field name="truck_loading_code" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="truck_loading_code"/>
		<property name="com.jaspersoft.studio.field.label" value="truck_loading_code"/>
	</field>
	<field name="comments" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="comments"/>
		<property name="com.jaspersoft.studio.field.label" value="comments"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="truck_temprature" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="truck_temprature"/>
		<property name="com.jaspersoft.studio.field.label" value="truck_temprature"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gross_weight" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.name" value="gross_weight"/>
		<property name="com.jaspersoft.studio.field.label" value="gross_weight"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="address" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="address"/>
		<property name="com.jaspersoft.studio.field.label" value="address"/>
	</field>
	<field name="appointment_required" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="appointment_required"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_required"/>
	</field>
	<field name="postal_code" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="postal_code"/>
		<property name="com.jaspersoft.studio.field.label" value="postal_code"/>
	</field>
	<field name="factory_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="factory_name"/>
		<property name="com.jaspersoft.studio.field.label" value="factory_name"/>
	</field>
	<field name="coordinates" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="coordinates"/>
		<property name="com.jaspersoft.studio.field.label" value="coordinates"/>
	</field>
	<field name="customer_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="customer_name"/>
		<property name="com.jaspersoft.studio.field.label" value="customer_name"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="175" splitType="Stretch">
			<frame>
				<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="554" height="175" uuid="ba4ebebc-d76f-4f73-b640-31d9091ed099"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="60" width="554" height="14" isPrintWhenDetailOverflows="true" uuid="78f2239a-b3fe-4f5a-9e4d-2a60a71ee3d3">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Κωδικός "+($F{point_type2})+": "+
(
	($F{truck_loading_code}!=null &&$F{truck_loading_code}!="null")?$F{truck_loading_code}:"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ContainerBottom" x="0" y="31" width="554" height="15" uuid="6ec60ec7-214d-4004-945c-e82fba8c4c2d">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Συντ/μένες: "+($F{coordinates}!=null?$F{coordinates}:"-")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement stretchType="ElementGroupHeight" x="0" y="16" width="554" height="15" isPrintWhenDetailOverflows="true" uuid="720e1a4c-533a-44dc-8906-e99d73e3c87a">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Διεύθυνση " +

(
	$F{point_type2}
)

+": " + ($F{factory_id}!=null?$F{factory_name}+",":"")+  ($F{address}!=null?$F{address}:"")+(($F{postal_code}!=null && $F{postal_code}!="null")?(",")+$F{postal_code}:"-"  )]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="137" width="554" height="38" isPrintWhenDetailOverflows="true" uuid="514f66b7-b03a-4ede-8dd9-df5211309687">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Σχόλια: "+
(
	($F{comments}!=null && $F{comments}!="null")?$F{comments}:"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="74" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="a10abdb4-58a8-459b-ab2e-4d8a3cd73a19">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Θερμοκρασία: "+ 
(
	($F{truck_temprature}!=null && $F{truck_temprature}!="null")?$F{truck_temprature}+"°C":"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="120" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="6d79815d-4a13-4ec3-878b-6cc49e7a6668">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Βάρος: "+ $F{gross_weight}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement stretchType="ElementGroupHeight" x="0" y="1" width="554" height="15" isPrintWhenDetailOverflows="true" uuid="5bd16635-34e2-4707-8b80-8269a824a48a">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type}]]></textFieldExpression>
				</textField>
				<frame>
					<reportElement x="0" y="90" width="554" height="15" uuid="46d914d6-f655-42f9-8980-3ee693ad4f09">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textField textAdjust="StretchHeight">
						<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="80" height="15" isPrintWhenDetailOverflows="true" uuid="1ac4e53e-4979-441c-9d55-8521f8cb7002">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.y" value="px"/>
						</reportElement>
						<textElement>
							<font fontName="ArialPdf"/>
						</textElement>
						<textFieldExpression><![CDATA["Προϊόντα: "]]></textFieldExpression>
					</textField>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="e8fc0153-f2cd-49f7-82a2-ac32f85c5f82">
							<printWhenExpression><![CDATA[$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_type_point.jasper"]]></subreportExpression>
					</subreport>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="5a2da413-127d-4654-98fb-6fa7024a7eaa">
							<printWhenExpression><![CDATA[!$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_type_waypoint.jasper"]]></subreportExpression>
					</subreport>
				</frame>
				<frame>
					<reportElement x="0" y="105" width="554" height="15" uuid="d68347ce-932e-45da-907b-3cf56360f2eb">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textField textAdjust="StretchHeight">
						<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="80" height="15" isPrintWhenDetailOverflows="true" uuid="929787a4-b08b-4a36-acd6-cd514fc81a53">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.y" value="px"/>
						</reportElement>
						<textElement>
							<font fontName="ArialPdf"/>
						</textElement>
						<textFieldExpression><![CDATA["Ποσότητα: "]]></textFieldExpression>
					</textField>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="297a78a4-60be-49a2-9890-cfb7e6c80523">
							<printWhenExpression><![CDATA[$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_quantity_point.jasper"]]></subreportExpression>
					</subreport>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="73e726e8-ac3a-4da9-b16c-b710f013d3b6">
							<printWhenExpression><![CDATA[!$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_quantity_waypoint.jasper"]]></subreportExpression>
					</subreport>
				</frame>
				<textField textAdjust="ScaleFont">
					<reportElement stretchType="ElementGroupHeight" x="0" y="46" width="554" height="14" isPrintWhenDetailOverflows="true" uuid="4dd008b7-f9b0-4f5a-884d-38c8075d4b1e">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Ημερομηνία "+($F{point_type2})+" : "+($F{appointment_required}!=null && $F{appointment_required}==1?
(
	$F{appointment_day_load}!=null?(
	new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format($F{appointment_day_load})	
)+" (Με ραντεβού)":"-"
):
(
	$F{appointment_day_load}!=null?(
	new SimpleDateFormat("dd/MM/yyyy").format($F{appointment_day_load})
	
	
):"-"
))]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</detail>
</jasperReport>
