<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.16.0.final using JasperReports Library version 6.16.0-48579d909b7943b64690c65c71e07e0b80981928  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="orders" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="86f6838b-3768-4336-b07a-ef8032ed8fcf">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="internova_db"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="210"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="783"/>
	<parameter name="order_loading_id" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String"/>
	<queryString language="SQL">
		<![CDATA[select * from 
				(
				select 
				'Loading' as point_type,
				'Loading' as point_type2,
				'Loading place' as point_type3,
				os.id,
				os.order_id,
				os.position,
				os.factory_id,
				os.appointment_day,
				os.appointment_day_load,
				os.truck_loading_code,
				os.comments,
				ord.truck_temprature,
				ord.gross_weight,
				f.address,
				f.appointment_required,
				f.postal_code,
				f.brand_name  as 'factory_name',
				concat(f.lattitude,',',f.longtitude) coordinates,
				cs.brand_name  as 'customer_name'
				from 
				order_schedules os
				left join factories f on (f.id=os.factory_id)
				join orders ord on (ord.id=os.order_id)
				join customers_suppliers cs on (cs.id=ord.customer_id)
				
				union
				
				select 
				IF(ow.offer_schedule_between_waypoint_id is null, 'Unloading','Loading/Unloading') as point_type,
				IF(ow.offer_schedule_between_waypoint_id is null, 'unloading','loading/unloading') as point_type2,
				IF(ow.offer_schedule_between_waypoint_id is null, 'Unloading place','Loading/Unloading place') as point_type3,
				ow.id,
				ow.order_id,
				ow.position,
				ow.factory_id,
				ow.appointment_day,
				ow.appointment_day_load,
				ow.truck_loading_code,
				ow.comments,
				ord.truck_temprature,
				ord.gross_weight,
				f.address,
				f.appointment_required,                
				f.postal_code,
				f.brand_name 'factory_name',
				concat(f.lattitude,',',f.longtitude) coordinates,
				cs.brand_name as 'customer_name'
				from 
				order_waypoints ow
				left join factories f on (f.id=ow.factory_id)
				join orders ord on (ord.id=ow.order_id)
				join customers_suppliers cs on (cs.id=ord.customer_id)
				) as timeline_table
				where timeline_table.order_id in 
				(
				select id
				from orders
				where id in
				(
				select order_id 
				from orders_loading_orders_selections 
				where order_loading_id=$P{order_loading_id}
				)
				)
				
				order by   timeline_table.position]]>
	</queryString>
	<field name="point_type" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="point_type"/>
		<property name="com.jaspersoft.studio.field.label" value="point_type"/>
	</field>
	<field name="point_type2" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="point_type2"/>
		<property name="com.jaspersoft.studio.field.label" value="point_type2"/>
	</field>
	<field name="point_type3" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="point_type3"/>
		<property name="com.jaspersoft.studio.field.label" value="point_type3"/>
	</field>
	<field name="id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="id"/>
		<property name="com.jaspersoft.studio.field.label" value="id"/>
	</field>
	<field name="order_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="order_id"/>
		<property name="com.jaspersoft.studio.field.label" value="order_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="order_schedules"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="position" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="position"/>
		<property name="com.jaspersoft.studio.field.label" value="position"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="order_waypoints"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="factory_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="factory_id"/>
		<property name="com.jaspersoft.studio.field.label" value="factory_id"/>
	</field>
	<field name="appointment_day" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="appointment_day"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_day"/>
	</field>
	<field name="appointment_day_load" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="appointment_day_load"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_day_load"/>
	</field>
	<field name="truck_loading_code" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="truck_loading_code"/>
		<property name="com.jaspersoft.studio.field.label" value="truck_loading_code"/>
	</field>
	<field name="comments" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="comments"/>
		<property name="com.jaspersoft.studio.field.label" value="comments"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="truck_temprature" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="truck_temprature"/>
		<property name="com.jaspersoft.studio.field.label" value="truck_temprature"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gross_weight" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.name" value="gross_weight"/>
		<property name="com.jaspersoft.studio.field.label" value="gross_weight"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="address" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="address"/>
		<property name="com.jaspersoft.studio.field.label" value="address"/>
	</field>
	<field name="appointment_required" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="appointment_required"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_required"/>
	</field>
	<field name="postal_code" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="postal_code"/>
		<property name="com.jaspersoft.studio.field.label" value="postal_code"/>
	</field>
	<field name="factory_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="factory_name"/>
		<property name="com.jaspersoft.studio.field.label" value="factory_name"/>
	</field>
	<field name="coordinates" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="coordinates"/>
		<property name="com.jaspersoft.studio.field.label" value="coordinates"/>
	</field>
	<field name="customer_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="customer_name"/>
		<property name="com.jaspersoft.studio.field.label" value="customer_name"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="175" splitType="Stretch">
			<frame>
				<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="554" height="175" uuid="b6011189-0000-4948-80fa-2dd51b3236ed"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="120" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="48ec3a0f-57c0-454c-89cf-81c108b42d59">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Weight: "+ $F{gross_weight}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement stretchType="ElementGroupHeight" x="0" y="16" width="554" height="15" isPrintWhenDetailOverflows="true" uuid="45068b79-6075-4c24-8735-8279101b62bc">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type3}

+": " + ($F{factory_id}!=null?$F{factory_name}+",":"")+  ($F{address}!=null?$F{address}:"")+(($F{postal_code}!=null && $F{postal_code}!="null")?(",")+$F{postal_code}:"-"  )]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="46" width="554" height="14" isPrintWhenDetailOverflows="true" uuid="55bebefc-9bcd-4efd-8ce1-329a2f52de16">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type}+" Date: "+(
	$F{appointment_required}!=null && $F{appointment_required}==1?
(
	
	$F{appointment_day_load}!=null?(
	
	
	
	new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format($F{appointment_day_load})
	
	
)+" ( With appointment )":"-"
	
	
):
(
	$F{appointment_day_load}!=null?(
	
	
	
	new SimpleDateFormat("dd/MM/yyyy").format($F{appointment_day_load})
	
	
):"-"
)
)]]></textFieldExpression>
				</textField>
				<frame>
					<reportElement x="0" y="105" width="554" height="15" uuid="df268e55-c4da-44d3-a9e8-835c8b6f0e9f">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textField textAdjust="StretchHeight">
						<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="80" height="15" isPrintWhenDetailOverflows="true" uuid="96dab6f6-10d8-4cc1-91f5-641c1c894b89">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.y" value="px"/>
						</reportElement>
						<textElement>
							<font fontName="ArialPdf"/>
						</textElement>
						<textFieldExpression><![CDATA["Quantity: "]]></textFieldExpression>
					</textField>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="bb5c6f4a-778b-4029-8e60-262eca6dbfda">
							<printWhenExpression><![CDATA[$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_quantity_point.jasper"]]></subreportExpression>
					</subreport>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="f2f3551a-a88d-42c4-a5ac-5c537e003d52">
							<printWhenExpression><![CDATA[!$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_quantity_waypoint.jasper"]]></subreportExpression>
					</subreport>
				</frame>
				<textField textAdjust="ScaleFont">
					<reportElement stretchType="ElementGroupHeight" x="0" y="1" width="554" height="15" isPrintWhenDetailOverflows="true" uuid="829a9dc6-b2f3-4cf6-ac58-1699b7e3d2f7">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type}]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="74" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="bbdb5fab-deea-4adb-80d9-7e63f9a34a28">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Temprature: "+ 
(
	($F{truck_temprature}!=null && $F{truck_temprature}!="null")?$F{truck_temprature}+"°C":"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="136" width="554" height="39" isPrintWhenDetailOverflows="true" uuid="d13caaa8-3150-44c8-9fd4-a02fcb42352a">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Comments: "+
(
	($F{comments}!=null && $F{comments}!="null")?$F{comments}:"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="60" width="554" height="14" isPrintWhenDetailOverflows="true" uuid="c88a680d-96c0-42f7-86da-2dd39368eba1">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type}+" Ref: "+
(
	($F{truck_loading_code}!=null &&$F{truck_loading_code}!="null")?$F{truck_loading_code}:"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ContainerBottom" x="0" y="31" width="554" height="15" uuid="5e76796d-24dc-4d25-bb96-8a16beb5a90a">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Coordinates: "+($F{coordinates}!=null?$F{coordinates}:"-")]]></textFieldExpression>
				</textField>
				<frame>
					<reportElement x="0" y="90" width="554" height="15" uuid="e5325f8d-fe1b-479b-b59b-467a6c257411">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textField textAdjust="StretchHeight">
						<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="80" height="15" isPrintWhenDetailOverflows="true" uuid="315b205e-568e-4194-ba12-645428e51cfa">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.y" value="px"/>
						</reportElement>
						<textElement>
							<font fontName="ArialPdf"/>
						</textElement>
						<textFieldExpression><![CDATA["Commodity: "]]></textFieldExpression>
					</textField>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="342e2402-be78-41ec-971c-a32da2f79b3a">
							<printWhenExpression><![CDATA[$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_type_point.jasper"]]></subreportExpression>
					</subreport>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="c56d692b-ce91-45ec-bd89-2adb27151786">
							<printWhenExpression><![CDATA[!$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_type_waypoint.jasper"]]></subreportExpression>
					</subreport>
				</frame>
			</frame>
		</band>
	</detail>
</jasperReport>
