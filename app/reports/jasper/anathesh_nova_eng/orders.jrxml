<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.16.0.final using JasperReports Library version 6.16.0-48579d909b7943b64690c65c71e07e0b80981928  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="orders" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="86f6838b-3768-4336-b07a-ef8032ed8fcf">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="internova_db"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="210"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="783"/>
	<parameter name="order_loading_id" class="java.lang.String"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String"/>
	<queryString language="SQL">
		<![CDATA[select * from 
				(
				select 
				'Loading' as point_type,
				'Loading' as point_type2,
				'Loading place' as point_type3,
				os.id,
				os.order_id,
				os.position,
				os.factory_id,
				os.appointment_day,
				os.appointment_day_load,
				os.truck_loading_code,
				os.comments,
				ord.truck_temprature,
				ord.gross_weight,
				f.address,
				f.appointment_required,
				f.postal_code,
				f.brand_name  as 'factory_name',
				concat(f.lattitude,',',f.longtitude) coordinates,
				cs.brand_name  as 'customer_name'
				from 
				order_schedules os
				left join factories f on (f.id=os.factory_id)
				join orders ord on (ord.id=os.order_id)
				join customers_suppliers cs on (cs.id=ord.customer_id)
				
				union
				
				select 
				IF(ow.offer_schedule_between_waypoint_id is null, 'Unloading','Loading/Unloading') as point_type,
				IF(ow.offer_schedule_between_waypoint_id is null, 'unloading','loading/unloading') as point_type2,
				IF(ow.offer_schedule_between_waypoint_id is null, 'Unloading place','Loading/Unloading place') as point_type3,
				ow.id,
				ow.order_id,
				ow.position,
				ow.factory_id,
				ow.appointment_day,
				ow.appointment_day_load,
				ow.truck_loading_code,
				ow.comments,
				ord.truck_temprature,
				ord.gross_weight,
				f.address,
				f.appointment_required,                
				f.postal_code,
				f.brand_name 'factory_name',
				concat(f.lattitude,',',f.longtitude) coordinates,
				cs.brand_name as 'customer_name'
				from 
				order_waypoints ow
				left join factories f on (f.id=ow.factory_id)
				join orders ord on (ord.id=ow.order_id)
				join customers_suppliers cs on (cs.id=ord.customer_id)
				) as timeline_table
				where timeline_table.order_id in 
				(
				select id
				from orders
				where id in
				(
				select order_id 
				from orders_loading_orders_selections 
				where order_loading_id=$P{order_loading_id}
				)
				)
				
				order by   timeline_table.position]]>
	</queryString>
	<field name="point_type" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="point_type"/>
		<property name="com.jaspersoft.studio.field.label" value="point_type"/>
	</field>
	<field name="point_type2" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="point_type2"/>
		<property name="com.jaspersoft.studio.field.label" value="point_type2"/>
	</field>
	<field name="point_type3" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="point_type3"/>
		<property name="com.jaspersoft.studio.field.label" value="point_type3"/>
	</field>
	<field name="id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="id"/>
		<property name="com.jaspersoft.studio.field.label" value="id"/>
	</field>
	<field name="order_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="order_id"/>
		<property name="com.jaspersoft.studio.field.label" value="order_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="order_schedules"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="position" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="position"/>
		<property name="com.jaspersoft.studio.field.label" value="position"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="order_waypoints"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="factory_id" class="java.lang.Long">
		<property name="com.jaspersoft.studio.field.name" value="factory_id"/>
		<property name="com.jaspersoft.studio.field.label" value="factory_id"/>
	</field>
	<field name="appointment_day" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="appointment_day"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_day"/>
	</field>
	<field name="appointment_day_load" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="appointment_day_load"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_day_load"/>
	</field>
	<field name="truck_loading_code" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="truck_loading_code"/>
		<property name="com.jaspersoft.studio.field.label" value="truck_loading_code"/>
	</field>
	<field name="comments" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="comments"/>
		<property name="com.jaspersoft.studio.field.label" value="comments"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="truck_temprature" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="truck_temprature"/>
		<property name="com.jaspersoft.studio.field.label" value="truck_temprature"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="gross_weight" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.name" value="gross_weight"/>
		<property name="com.jaspersoft.studio.field.label" value="gross_weight"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="orders"/>
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="address" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="address"/>
		<property name="com.jaspersoft.studio.field.label" value="address"/>
	</field>
	<field name="appointment_required" class="java.lang.Integer">
		<property name="com.jaspersoft.studio.field.name" value="appointment_required"/>
		<property name="com.jaspersoft.studio.field.label" value="appointment_required"/>
	</field>
	<field name="postal_code" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="postal_code"/>
		<property name="com.jaspersoft.studio.field.label" value="postal_code"/>
	</field>
	<field name="factory_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="factory_name"/>
		<property name="com.jaspersoft.studio.field.label" value="factory_name"/>
	</field>
	<field name="coordinates" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="coordinates"/>
		<property name="com.jaspersoft.studio.field.label" value="coordinates"/>
	</field>
	<field name="customer_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="customer_name"/>
		<property name="com.jaspersoft.studio.field.label" value="customer_name"/>
	</field>
	<background>
		<band splitType="Stretch"/>
	</background>
	<detail>
		<band height="188" splitType="Stretch">
			<frame>
				<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="554" height="188" uuid="b6011189-0000-4948-80fa-2dd51b3236ed"/>
				<box>
					<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="120" y="46" width="434" height="14" isPrintWhenDetailOverflows="true" uuid="f0936e04-ca8e-4179-8639-79f581bd17d7">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{appointment_required}!=null && $F{appointment_required}==1?
(
	
	$F{appointment_day_load}!=null?(
	
	
	
	new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format($F{appointment_day_load})
	
	
)+" ( With appointment )":"-"
	
	
):
(
	$F{appointment_day_load}!=null?(
	
	
	
	new SimpleDateFormat("dd/MM/yyyy").format($F{appointment_day_load})
	
	
):"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="60" width="554" height="14" isPrintWhenDetailOverflows="true" uuid="e35274fe-77e9-4f32-afb8-75a93f180f53">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type}+" Ref: "+
(
	($F{truck_loading_code}!=null &&$F{truck_loading_code}!="null")?$F{truck_loading_code}:"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ContainerBottom" x="0" y="31" width="554" height="15" uuid="b28d17ed-1272-4b08-b9eb-76db5e47c7fd">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Coordinates: "+($F{coordinates}!=null?$F{coordinates}:"-")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement stretchType="ElementGroupHeight" x="0" y="16" width="554" height="15" isPrintWhenDetailOverflows="true" uuid="8f4fdec9-7215-46b1-bbd8-a099aca68d09">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type3}

+": " + ($F{factory_id}!=null?$F{factory_name}+",":"")+  ($F{address}!=null?$F{address}:"")+(($F{postal_code}!=null && $F{postal_code}!="null")?(",")+$F{postal_code}:"-"  )]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement stretchType="ElementGroupHeight" x="0" y="136" width="554" height="14" isPrintWhenDetailOverflows="true" uuid="e9e15fbd-9813-46e2-8b9d-8c3b45451303">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Customer Name: "+
(
	($F{customer_name}!=null &&$F{customer_name}!="null")?$F{customer_name}:"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="150" width="554" height="38" isPrintWhenDetailOverflows="true" uuid="db93b012-1b2f-40ba-a516-66fffcc865de">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Comments: "+
(
	($F{comments}!=null && $F{comments}!="null")?$F{comments}:"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="74" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="b1ec1032-e145-43ed-8d0c-2504f23b4216">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Temprature: "+ 
(
	($F{truck_temprature}!=null && $F{truck_temprature}!="null")?$F{truck_temprature}+"°C":"-"
)]]></textFieldExpression>
				</textField>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="120" width="554" height="16" isPrintWhenDetailOverflows="true" uuid="6ab41d91-9f5a-40e8-93bc-a18e26c87a09">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA["Weight: "+ $F{gross_weight}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement stretchType="ElementGroupHeight" x="0" y="1" width="554" height="15" isPrintWhenDetailOverflows="true" uuid="dde8e7a0-3d24-4322-9840-189d1363ba3e">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type}]]></textFieldExpression>
				</textField>
				<frame>
					<reportElement x="0" y="90" width="554" height="15" uuid="0d700611-b05e-41d8-9252-1e7bfdb7240f">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textField textAdjust="StretchHeight">
						<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="80" height="15" isPrintWhenDetailOverflows="true" uuid="71d01618-e69b-43e9-8ba2-0295d5bd96e6">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.y" value="px"/>
						</reportElement>
						<textElement>
							<font fontName="ArialPdf"/>
						</textElement>
						<textFieldExpression><![CDATA["Commodity: "]]></textFieldExpression>
					</textField>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="73f5fb1f-7a90-427d-a278-296796ee1097">
							<printWhenExpression><![CDATA[$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_type_point.jasper"]]></subreportExpression>
					</subreport>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="7e920266-2ead-46eb-a11a-0ef8eeaf531c">
							<printWhenExpression><![CDATA[!$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_type_waypoint.jasper"]]></subreportExpression>
					</subreport>
				</frame>
				<frame>
					<reportElement x="0" y="105" width="554" height="15" uuid="455dcf33-7ec2-4eef-bef4-228487fe2204">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<textField textAdjust="StretchHeight">
						<reportElement stretchType="ElementGroupHeight" x="0" y="0" width="80" height="15" isPrintWhenDetailOverflows="true" uuid="4137901d-e7e3-411c-a3ea-d51f310f364c">
							<property name="com.jaspersoft.studio.unit.height" value="px"/>
							<property name="com.jaspersoft.studio.unit.y" value="px"/>
						</reportElement>
						<textElement>
							<font fontName="ArialPdf"/>
						</textElement>
						<textFieldExpression><![CDATA["Quantity: "]]></textFieldExpression>
					</textField>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="241200ea-6b5a-4c6b-926a-76b5a079acc0">
							<printWhenExpression><![CDATA[$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_quantity_point.jasper"]]></subreportExpression>
					</subreport>
					<subreport>
						<reportElement x="60" y="0" width="494" height="15" uuid="f61040b1-07bc-4d28-833e-dd57461c869a">
							<printWhenExpression><![CDATA[!$F{point_type}.equalsIgnoreCase( "Φόρτωση" )]]></printWhenExpression>
						</reportElement>
						<subreportParameter name="SUBREPORT_DIR">
							<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
						</subreportParameter>
						<subreportParameter name="id">
							<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
						</subreportParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
						<subreportExpression><![CDATA[$P{SUBREPORT_DIR}+  "items_quantity_waypoint.jasper"]]></subreportExpression>
					</subreport>
				</frame>
				<textField textAdjust="StretchHeight">
					<reportElement stretchType="ElementGroupHeight" x="0" y="46" width="120" height="14" isPrintWhenDetailOverflows="true" uuid="6a5a1843-08ce-4dac-84ed-7d7d5502f3dd">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<textElement>
						<font fontName="ArialPdf"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{point_type}+" Date"+($F{appointment_required}!=null && $F{appointment_required}==1?
(
	
	$F{appointment_day_load}!=null?(
	
	
	
	new SimpleDateFormat("dd/MM/yyyy HH:mm:ss").format($F{appointment_day_load})
	
	
)+" ( With appointment )":"-"
	
	
):
(
	$F{appointment_day_load}!=null?(
	
	
	
	new SimpleDateFormat("dd/MM/yyyy").format($F{appointment_day_load})
	
	
):"-"
))]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</detail>
</jasperReport>
